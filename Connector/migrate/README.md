# 迁移/C3服务

## 说明
```
open-c3部署后，会使用本地的两个目录: /data/open-c3 (程序目录) 和 /data/open-c3-data (数据目录)
正常情况下，只要把这两个目录拷贝到新机器的相同路径下就可以把服务启动到新的机器上。

但是有如下几个问题需要考虑:

  1. 我的网络环境比较复杂，在c3的代理管理中配置了很多代理，包括用来做CICD的代理和监控的代理
     迁移过去的机器网络都是通的吗，怎么做验证。
  2. 我的容器管理中的集群，迁移到新c3后网络是否正常。
  3. 我流水线中使用到的git地址，在新c3中网络是否通。
  4. 我的c3的open-c3-data目录很大(比如：CI构建出来的项目的历史版本的发布包)，数据需要怎么同步
     如果需要关旧c3然后拷贝到新C3后在启动服务，这个时间会比较长，想缩短这个时间避免影响业务使用c3。

为了解决如上描述的几个问题，这里提供了迁移的工具。

```

## 使用方式

```
1. 在新旧c3的机器上部署旧c3的agent，让旧c3可以访问它。【注意：新c3和旧c3部署的都是旧c3的agent】
2. 在新c3中通过一键安装的方式安装单机版c3
2. 在旧c3上执行迁移命令
  /data/open-c3/Connector/migrate/sync --node C3的ip

```

## TODO
```
keycloak 还能用吗？
本地的好多已经缓存的docker镜像也同步过去，这样下次构建就快了。
```
