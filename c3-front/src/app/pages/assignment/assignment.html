<div class="row block" ng-init="assignmentns = { 'todo': 'C3T.待办', 'fail': 'C3T.操作失败', 'success':'C3T.已完成', 'refuse': 'C3T.已拒绝', 'cancel': 'C3T.已取消', 'close': 'C3T.关闭'}" >

<div>
    <div class="panel panel-info">

        <div class="panel-heading">
            <span class="panel-controls">
                <button class="btn btn-info" uib-tooltip="{{'C3T.刷新'|translate}}" ng-click="assignment.reloadA()" ><i class="fa fa-refresh fa-fw" ng-class="{'fa-spin':!assignment.loadoverA}" ></i></button>
            </span>
            <h5>{{'C3T.我请求的协助'|translate}}</h5>
        </div>

        <div class="panel-body">
            <div class="panel-tabs">
                <table ng-table="assignment.bymeTable" class="table table-hover text-center table-condensed" show-filter="true">
                    <tr ng-repeat="d in $data">
                        <td style="width: 10%" data-title="'C3T.创建时间'|translate" filter="{ create_time: 'text'}" sortable="'create_time'">{{d.create_time}}</td>
                        <td style="width: 10%" data-title="'C3T.结束时间'|translate" filter="{ finish_time: 'text'}" sortable="'finish_time'">{{d.finish_time}}</td>
                        <td style="width: 10%" data-title="'C3T.耗时'|translate">{{ assignment.seftime(d.create_time,d.finish_time)}}</td>
                        <td style="width: 10%" data-title="'C3T.处理人'|translate" filter="{ handler: 'text'}" sortable="'handler'">{{d.handler}}</td>
                        <td style="width: 20%" data-title="'C3T.审批名称'|translate" filter="{ name: 'text'}" sortable="'name'">{{d.name}}</td>
                        <td style="width: 10%" data-title="'C3T.状态'|translate" >{{assignmentns[d.status]|translate}}</td>
                        <td style="width: 10%" data-title="'C3T.操作'|translate">
                            <button ng-disabled="d.status!=='todo'" class="btn btn-primary btn-sm" ng-click="assignment.updateStatus(d.id, 'cancel')">{{'C3T.取消'|translate}}</button>
                            <button class="btn btn-info btn-sm" ng-click="assignment.edit(d.id,0)">{{'C3T.详情'|translate}}</button>
                        </td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
</div>

<div>
    <div class="panel panel-primary">

        <div class="panel-heading">
            <span class="panel-controls">
                <button class="btn btn-primary" uib-tooltip="{{'C3T.刷新'|translate}}" ng-click="assignment.reloadB()" ><i class="fa fa-refresh fa-fw" ng-class="{'fa-spin':!assignment.loadoverB}" ></i></button>
            </span>
            <h5>{{'C3T.需要我协助'|translate}}</h5>
        </div>

        <div class="panel-body">
            <div class="panel-tabs">
                <table ng-table="assignment.tomeTable" class="table table-hover text-center table-condensed" show-filter="true">
                    <tr ng-repeat="d in $data">
                        <td style="width: 10%" data-title="'C3T.创建时间'|translate" filter="{ create_time: 'text'}" sortable="'create_time'">{{d.create_time}}</td>
                        <td style="width: 10%" data-title="'C3T.结束时间'|translate" filter="{ finish_time: 'text'}" sortable="'finish_time'">{{d.finish_time}}</td>
                        <td style="width: 10%" data-title="'C3T.耗时'|translate">{{ assignment.seftime(d.create_time,d.finish_time)}}</td>
                        <td style="width: 10%" data-title="'C3T.提交人'|translate" filter="{ submitter: 'text'}" sortable="'submitter'">{{d.submitter}}</td>
                        <td style="width: 20%" data-title="'C3T.审批名称'|translate" filter="{ name: 'text'}" sortable="'name'">{{d.name}}</td>
                        <td style="width: 10%" data-title="'C3T.状态'|translate" >{{assignmentns[d.status]|translate}}</td>
                        <td style="width: 10%" data-title="'C3T.操作'|translate">
                            <button ng-disabled="d.status!=='todo'" class="btn btn-primary btn-sm" ng-click="assignment.commit(d, 'todo')">{{'C3T.提交'|translate}}</button>
                            <button ng-disabled="d.status!=='todo'" class="btn btn-primary btn-sm" ng-click="assignment.updateStatus(d.id, 'refuse')">{{'C3T.拒绝'|translate}}</button>
                            <button ng-disabled="d.status!=='fail'" class="btn btn-primary btn-sm" ng-click="assignment.commit(d, 'fail')">{{'C3T.重试'|translate}}</button>
                            <button ng-disabled="d.status!=='fail'" class="btn btn-primary btn-sm" ng-click="assignment.updateStatus(d.id, 'close')">{{'C3T.关闭'|translate}}</button>
                            <button class="btn btn-info btn-sm" ng-click="assignment.edit(d.id, 1)">{{'C3T.详情'|translate}}</button>
                        </td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
</div>

</div>
