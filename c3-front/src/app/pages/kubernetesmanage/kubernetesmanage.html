<cmloading ng-if="(!kubernetesmanage.loadoverA ) || (!kubernetesmanage.loadoverB)"></cmloading>
<div class="row block">
    <div class="col-lg-12 col-xs-12 ml0 pl0" style="padding-left: 0">

        <div class="panel panel-default" style="box-shadow: -2px 0 10px 3px rgba(0,0,0,.1);">

            <div class="panel-heading">
            <span class="panel-controls">
                <button class="btn btn-info" uib-tooltip="添加集群" ng-click="kubernetesmanage.addCluster()"><i class="fa fa-plus" aria-hidden="true">添加集群</i></button>
            </span>

                <h4 style="font-weight: bold;color: #337ab7">集群({{clusterCount||0}})</h4>
            </div>

            <div class="panel-body" style="margin-top: 20px">

                <div class="row">
                    <label class="col-md-1 control-label fwbold">集群:</label>
                    <select id="selecteddataval" class="form-control"  ng-model="choiceClusterId" style="width: 40%" >
                         <option ng-repeat="x in kubernetesmanage.clusterlist" value="{{x.id}}">{{x.name}} 详情: {{x.describe}} 操作权限: {{x.auth}}</option>
                    </select>
                    <label class="col-md-1 control-label fwbold">命名空间:</label>
                    <select id="selectednameval" class="form-control"  ng-model="choiceNamespace" style="width: 40%" >
                         <option value="">全部</option>
                         <option ng-repeat="x in kubernetesmanage.namespace" value="{{x}}">{{x}}</option>
                    </select>
                    <label class="col-md-1 control-label fwbold">状态:</label>
                    <select id="selectedprojectval" class="form-control"  ng-model="choiceStat" style="width: 40%" >
                         <option value="">全部</option>
                         <option value="fail">异常</option>
                    </select>
                </div>

                <div ng-if="choiceClusterId" class="row">
                    <button class="btn btn-info" uib-tooltip="新建应用" ng-click="kubernetesmanage.apply()"><i class="fa fa-rocket" aria-hidden="true">创建应用</i></button>
                    <button class="btn btn-info" uib-tooltip="管理集群节点" ng-click="kubernetesmanage.node()"><i class="fa fa-cubes" aria-hidden="true">集群节点</i></button>
                </div>
            </div>
        </div>
    </div>

    <div class="col-lg-12 col-xs-12 ml0 pl0" style="padding-left: 0">
        <div class="panel panel-default" style="box-shadow: -2px 0 10px 3px rgba(0,0,0,.1);">

            <div class="panel-heading">
                <h4 style="font-weight: bold;color: #337ab7">Deployment({{kubernetesmanage.deploymentCount||0}})<a>:READY({{ kubernetesmanage.deploymentReady||0}}) </a></h4>
            </div>
            <div class="panel-body" style="margin-top: 2px">
              <div class="pt20" style="overflow: auto;">
                <table ng-table="kubernetesmanage.deploymentTable" class="table table-scroll table-hover text-left table-condensed" show-filter="true">
                    <tr ng-repeat="m in $data">
                        <td data-title="'命名空间'" width="80" filter="{ NAMESPACE: 'text'}" sortable="'NAMESPACE'">{{m.NAMESPACE}}</td>
                        <td data-title="'名称'" width="80" filter="{ NAME: 'text'}" sortable="'NAME'">{{m.NAME}}</td>
                        <td data-title="'READY'" width="80" filter="{ READY: 'text'}" sortable="'READY'">
                            <a ng-if="m.IREADY" >{{m.READY}}<a>
                            <a ng-if="!m.IREADY" style="color: red;" >{{m.READY}}<a>
                        </td>
                        <td data-title="'UP-TO-DATE'" width="80" filter="{ UP_TO_DATE: 'text'}" sortable="'UP_TO_DATE'">{{m.UP_TO_DATE}}</td>
                        <td data-title="'AVAILABLE'" width="80" filter="{ AVAILABLE: 'text'}" sortable="'AVAILABLE'">{{m.AVAILABLE}}</td>
                        <td data-title="'AGE'" width="80" filter="{ AGE: 'text'}" sortable="'AGE'">{{m.AGE}}</td>
                        <td data-title="'CONTAINERS'" width="80" filter="{ CONTAINERS: 'text'}" sortable="'CONTAINERS'">{{m.CONTAINERS}}</td>
                        <td data-title="'IMAGES'" width="80" filter="{ IMAGES: 'text'}" sortable="'IMAGES'">{{m.IMAGES}}</td>
                        <td data-title="'SELECTOR'" width="80" filter="{ SELECTOR: 'text'}" sortable="'SELECTOR'">{{m.SELECTOR}}</td>
                        <td data-title="'操作'" width="80" >
                            <i class="fa fa-location-arrow fa-2x" aria-hidden="true" ng-click="kubernetesmanage.setimage('deployment',m.INAME,m.NAMESPACE,m.IMAGES,m.CONTAINERS)" uib-tooltip="升级" style="cursor:pointer;color: #339094;" ></i>
                            <i class="fa fa-life-ring fa-2x" aria-hidden="true" ng-click="kubernetesmanage.rollback('deployment',m.INAME,m.NAMESPACE,m.IMAGES,m.CONTAINERS)" uib-tooltip="回滚" style="cursor:pointer;color: #339094;" ></i>
                            <i class="fa fa-sort-numeric-asc fa-2x" aria-hidden="true" ng-click="kubernetesmanage.setreplicas('deployment',m.INAME,m.NAMESPACE,m.AVAILABLE)" uib-tooltip="扩缩容" style="cursor:pointer;color: #339094;" ></i>
                            <i class="fa fa-edit fa-2x" aria-hidden="true" ng-click="kubernetesmanage.edityaml('deployment',m.INAME,m.NAMESPACE)" uib-tooltip="编辑yaml" style="cursor:pointer;color: #339094;" ></i>
                            <i class="fa fa-search fa-2x" aria-hidden="true" ng-click="kubernetesmanage.describe('deployment',m.INAME,m.NAMESPACE)" uib-tooltip="查看" style="cursor:pointer;color: #339094;" ></i>
                        </td> 
                    </tr>
                </table>
              </div>
            </div>
        </div>
    </div>


    <div class="col-lg-12 col-xs-12 ml0 pl0" style="padding-left: 0">
        <div class="panel panel-default" style="box-shadow: -2px 0 10px 3px rgba(0,0,0,.1);">

            <div class="panel-heading">
                <h4 style="font-weight: bold;color: #337ab7">Pod({{kubernetesmanage.podCount||0}})
                    <a>READY(</a>
                    <a ng-if="kubernetesmanage.podCount == kubernetesmanage.podReady" >{{kubernetesmanage.podReady||0}}</a>
                    <a ng-if="kubernetesmanage.podCount != kubernetesmanage.podReady" style="color: red;" >{{kubernetesmanage.podReady||0}}</a>
                    <a>)</a>
                    <a>Running(</a>
                    <a ng-if="kubernetesmanage.podCount == kubernetesmanage.podRunning" >{{kubernetesmanage.podRunning||0}}</a>
                    <a ng-if="kubernetesmanage.podCount != kubernetesmanage.podRunning" style="color: red;" >{{kubernetesmanage.podRunning||0}}</a>
                    <a>)</a>
                </h4>
            </div>
            <div class="panel-body" style="margin-top: 2px">
              <div class="pt20" style="overflow: auto;">
                <table ng-table="kubernetesmanage.podTable" class="table table-scroll table-hover text-left table-condensed" show-filter="true">
                    <tr ng-repeat="m in $data">
                        <td data-title="'命名空间'" width="80" filter="{ NAMESPACE: 'text'}" sortable="'NAMESPACE'">{{m.NAMESPACE}}</td>
                        <td data-title="'名称'" width="80" filter="{ NAME: 'text'}" sortable="'NAME'">{{m.NAME}}</td>
                        <td data-title="'READY'" width="80" filter="{ READY: 'text'}" sortable="'READY'">
                            <a ng-if="m.IREADY" >{{m.READY}}<a>
                            <a ng-if="!m.IREADY" style="color: red;" >{{m.READY}}<a>
                        </td>
                        <td data-title="'STATUS'" width="80" filter="{ STATUS: 'text'}" sortable="'STATUS'">
                            <a ng-if="m.STATUS=='Running'" >{{m.STATUS}}<a>
                            <a ng-if="m.STATUS!='Running'" style="color: red;" >{{m.STATUS}}<a>
                        </td>
                        <td data-title="'RESTARTS'" width="80" filter="{ RESTARTS: 'text'}" sortable="'RESTARTS'">{{m.RESTARTS}}</td>
                        <td data-title="'AGE'" width="80" filter="{ AGE: 'text'}" sortable="'AGE'">{{m.AGE}}</td>
                        <td data-title="'IP'" width="80" filter="{ IP: 'text'}" sortable="'IP'">{{m.IP}}</td>
                        <td data-title="'NODE'" width="80" filter="{ NODE: 'text'}" sortable="'NODE'">{{m.NODE}}</td>
                        <td data-title="'NOMINATED NODE'" width="80" filter="{ NOMINATED_NODE: 'text'}" sortable="'NOMINATED_NODE'">{{m.NOMINATED_NODE}}</td>
                        <td data-title="'READINESS GATES'" width="80" filter="{ READINESS_GATES: 'text'}" sortable="'READINESS_GATES'">{{m.READINESS_GATES}}</td>
                        <td data-title="'操作'" width="80" >
                            <i class="fa fa-search fa-2x" aria-hidden="true" ng-click="kubernetesmanage.describe('pod',m.INAME,m.NAMESPACE)" uib-tooltip="查看" style="cursor:pointer;color: #339094;" ></i>
                            <i class="fa fa-television fa-2x" aria-hidden="true" ng-click="kubernetesmanage.openOneTab(m,'sh')" uib-tooltip="进入POD虚拟终端" style="cursor:pointer;color: #339094;" ></i>
                            <i class="fa fa-file-text-o fa-2x" aria-hidden="true" ng-click="kubernetesmanage.openOneTab(m,'log')" uib-tooltip="查看POD日志" style="cursor:pointer;color: #339094;" ></i>
                        </td> 
                    </tr>
                </table>
              </div>
            </div>
        </div>
    </div>


    <div class="col-lg-12 col-xs-12 ml0 pl0" style="padding-left: 0">
        <div class="panel panel-default" style="box-shadow: -2px 0 10px 3px rgba(0,0,0,.1);">

            <div class="panel-heading">
                <h4 style="font-weight: bold;color: #337ab7">Daemonset({{kubernetesmanage.daemonsetCount||0}})
                    <a>READY(</a>
                    <a ng-if="kubernetesmanage.daemonsetCount == kubernetesmanage.daemonsetReady" >{{kubernetesmanage.daemonsetReady||0}}</a>
                    <a ng-if="kubernetesmanage.daemonsetCount != kubernetesmanage.daemonsetReady" style="color: red;" >{{kubernetesmanage.daemonsetReady||0}}</a>
                    <a>)</a>
                </h4>

            </div>
            <div class="panel-body" style="margin-top: 2px">
              <div class="pt20" style="overflow: auto;">
                <table ng-table="kubernetesmanage.daemonsetTable" class="table table-scroll table-hover text-left table-condensed" show-filter="true">
                    <tr ng-repeat="m in $data">
                        <td data-title="'命名空间'" width="80" filter="{ NAMESPACE: 'text'}" sortable="'NAMESPACE'">{{m.NAMESPACE}}</td>
                        <td data-title="'名称'" width="80" filter="{ NAME: 'text'}" sortable="'NAME'">{{m.NAME}}</td>
                        <td data-title="'DESIRED'" width="80" filter="{ DESIRED: 'text'}" sortable="'DESIRED'">{{m.DESIRED}}</td>
                        <td data-title="'CURRENT'" width="80" filter="{ CURRENT: 'text'}" sortable="'CURRENT'">{{m.CURRENT}}</td>
                        <td data-title="'READY'" width="80" filter="{ READY: 'text'}" sortable="'READY'">{{m.READY}}</td>
                        <td data-title="'UP-TO-DATE'" width="80" filter="{ UP_TO_DATE: 'text'}" sortable="'UP_TO_DATE'">{{m.UP_TO_DATE}}</td>
                        <td data-title="'AVAILABLE'" width="80" filter="{ AVAILABLE: 'text'}" sortable="'AVAILABLE'">{{m.AVAILABLE}}</td>
                        <td data-title="'AGE'" width="80" filter="{ AGE: 'text'}" sortable="'AGE'">{{m.AGE}}</td>
                        <td data-title="'CONTAINERS'" width="80" filter="{ CONTAINERS: 'text'}" sortable="'CONTAINERS'">{{m.CONTAINERS}}</td>
                        <td data-title="'IMAGES'" width="80" filter="{ IMAGES: 'text'}" sortable="'IMAGES'">{{m.IMAGES}}</td>
                        <td data-title="'SELECTOR'" width="80" filter="{ SELECTOR: 'text'}" sortable="'SELECTOR'">{{m.SELECTOR}}</td>
                        <td data-title="'操作'" width="80" >
                            <i class="fa fa-search fa-2x" aria-hidden="true" ng-click="kubernetesmanage.describe('daemonset',m.INAME,m.NAMESPACE)" uib-tooltip="查看" style="cursor:pointer;color: #339094;" ></i>
                        </td> 
                    </tr>
                </table>
              </div>
            </div>
        </div>
    </div>


    <div class="col-lg-12 col-xs-12 ml0 pl0" style="padding-left: 0">
        <div class="panel panel-default" style="box-shadow: -2px 0 10px 3px rgba(0,0,0,.1);">

            <div class="panel-heading">
                <h4 style="font-weight: bold;color: #337ab7">Service({{kubernetesmanage.serviceCount||0}})</h4>
            </div>
            <div class="panel-body" style="margin-top: 2px">
              <div class="pt20" style="overflow: auto;">
                <table ng-table="kubernetesmanage.serviceTable" class="table table-scroll table-hover text-left table-condensed" show-filter="true">
                    <tr ng-repeat="m in $data">
                        <td data-title="'命名空间'" width="80" filter="{ NAMESPACE: 'text'}" sortable="'NAMESPACE'">{{m.NAMESPACE}}</td>
                        <td data-title="'名称'" width="80" filter="{ NAME: 'text'}" sortable="'NAME'">{{m.NAME}}</td>
                        <td data-title="'TYPE'" width="80" filter="{ TYPE: 'text'}" sortable="'TYPE'">{{m.TYPE}}</td>
                        <td data-title="'CLUSTER-IP'" width="80" filter="{ CLUSTER_IP: 'text'}" sortable="'CLUSTER_IP'">{{m.CLUSTER_IP}}</td>
                        <td data-title="'EXTERNAL-IP'" width="80" filter="{ EXTERNAL_IP: 'text'}" sortable="'EXTERNAL_IP'">{{m.EXTERNAL_IP}}</td>
                        <td data-title="'PORT(S)'" width="80" filter="{ PORT_S_: 'text'}" sortable="'PORT_S_'">{{m.PORT_S_}}</td>
                        <td data-title="'AGE'" width="80" filter="{ AGE: 'text'}" sortable="'AGE'">{{m.AGE}}</td>
                        <td data-title="'SELECTOR'" width="80" filter="{ SELECTOR: 'text'}" sortable="'SELECTOR'">{{m.SELECTOR}}</td>
                        <td data-title="'操作'" width="80" >
                            <i class="fa fa-search fa-2x" aria-hidden="true" ng-click="kubernetesmanage.describe('service',m.INAME,m.NAMESPACE)" uib-tooltip="查看" style="cursor:pointer;color: #339094;" ></i>
                        </td> 
                    </tr>
                </table>
              </div>
            </div>
        </div>
    </div>


    <div class="col-lg-12 col-xs-12 ml0 pl0" style="padding-left: 0">
        <div class="panel panel-default" style="box-shadow: -2px 0 10px 3px rgba(0,0,0,.1);">

            <div class="panel-heading">
                <h4 style="font-weight: bold;color: #337ab7">Replicaset({{kubernetesmanage.replicasetCount||0}})
                    <a>READY(</a>
                    <a ng-if="kubernetesmanage.replicasetCount == kubernetesmanage.replicasetReady" >{{kubernetesmanage.replicasetReady||0}}</a>
                    <a ng-if="kubernetesmanage.replicasetCount != kubernetesmanage.replicasetReady" style="color: red;" >{{kubernetesmanage.replicasetReady||0}}</a>
                    <a>)</a>
                </h4>

            </div>
            <div class="panel-body" style="margin-top: 2px">
              <div class="pt20" style="overflow: auto;">
                <table ng-table="kubernetesmanage.replicasetTable" class="table table-scroll table-hover text-left table-condensed" show-filter="true">
                    <tr ng-repeat="m in $data">
                        <td data-title="'命名空间'" width="80" filter="{ NAMESPACE: 'text'}" sortable="'NAMESPACE'">{{m.NAMESPACE}}</td>
                        <td data-title="'名称'" width="80" filter="{ NAME: 'text'}" sortable="'NAME'">{{m.NAME}}</td>
                        <td data-title="'DESIRED'" width="80" filter="{ DESIRED: 'text'}" sortable="'DESIRED'">{{m.DESIRED}}</td>
                        <td data-title="'CURRENT'" width="80" filter="{ CURRENT: 'text'}" sortable="'CURRENT'">{{m.CURRENT}}</td>
                        <td data-title="'READY'" width="80" filter="{ READY: 'text'}" sortable="'READY'">{{m.READY}}</td>
                        <td data-title="'AGE'" width="80" filter="{ AGE: 'text'}" sortable="'AGE'">{{m.AGE}}</td>
                        <td data-title="'CONTAINERS'" width="80" filter="{ CONTAINERS: 'text'}" sortable="'CONTAINERS'">{{m.CONTAINERS}}</td>
                        <td data-title="'IMAGES'" width="80" filter="{ IMAGES: 'text'}" sortable="'IMAGES'">{{m.IMAGES}}</td>
                        <td data-title="'SELECTOR'" width="80" filter="{ SELECTOR: 'text'}" sortable="'SELECTOR'">{{m.SELECTOR}}</td>
                        <td data-title="'操作'" width="80" >
                            <i class="fa fa-search fa-2x" aria-hidden="true" ng-click="kubernetesmanage.describe('replicaset',m.INAME,m.NAMESPACE)" uib-tooltip="查看" style="cursor:pointer;color: #339094;" ></i>
                        </td> 
                    </tr>
                </table>
              </div>
            </div>
        </div>
    </div>


</div>
